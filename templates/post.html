<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="${baseurl}/styles/highlight.css" type="text/css" />
    <link rel="stylesheet" href="${baseurl}/styles/archive.css" type="text/css" />
    <link rel="stylesheet" href="${baseurl}/styles/style.css" type="text/css" />

    <link type="text/css" href="${baseurl}/styles/smoothness/jquery-ui-1.7.2.custom.css" rel="Stylesheet" />    
    <script type="text/javascript" src="${baseurl}/scripts/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="${baseurl}/scripts/jquery-ui-1.7.2.custom.min.js"></script>
    <title>hortont &middot; blog &middot; ${Markup(post.title)}</title>
  </head>
  <body class="index">
    <xi:include href="button-bar.html" />
    
    <table id="posts" border="0" width="100%">
    <tr>
        <td></td>
        <td class="post">
        </td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td class="post">
            <div class="postContent">
            <h1>${Markup(post.title)}</h1>
            <h2>${post.date} in ${Markup(post.categories)}</h2>
            <p>${Markup(post.content)}</p>
            
            <div class="hr" />
            
            <py:if test="len(post.comments) != 0">
                <h3>Comments (legacy)</h3>
            </py:if>
            
            <py:for each="comment in post.comments">
                <div class="oldcomment">
                <p style='font-weight: bold;'>
                    <py:if test="comment.authorURL != ''">
                        <a href="${comment.authorURL}">${comment.author}</a>
                    </py:if>
                    <py:if test="comment.authorURL == ''">
                        ${comment.author}
                    </py:if>
                </p>
                <p style='margin-left: 2em;'>${Markup(comment.content)}</p>
                </div>
            </py:for>
            
            <py:if test="len(post.comments) != 0">
                <div class="hr" />
            </py:if>
            
            <div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/hortont/embed.js"></script><noscript><a href="http://disqus.com/forums/hortont/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
        </td>
        <td></td>
    </tr>
    </table>
    <script type="text/javascript">
    //<![CDATA[
    (function() {
        var links = document.getElementsByTagName('a');
        var query = '?';
        for(var i = 0; i < links.length; i++) {
        if(links[i].href.indexOf('#disqus_thread') >= 0) {
            query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
        }
        }
        document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/hortont/get_num_replies.js' + query + '"></' + 'script>');
    })();
    //]]>
    </script>
  </body>
</html>
